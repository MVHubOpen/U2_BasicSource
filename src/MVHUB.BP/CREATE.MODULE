    PROGRAM CREATE.MODULE
*-------------------------------------------------------
* mvHubOpen, copyright (c) by James F Thompson
* Distributed under an MIT license:
*                    https://opensource.org/licenses/MIT
*-------------------------------------------------------
    INCLUDE MVHUB.BP MVHUB.MAP.INCLUDE
*
    OPEN "MVHUB.MODULE" TO F.MODULE ELSE
        EXECUTE "ICREATE-FILE DATA MVHUB.MODULE 18 101 4"
        EXECUTE "ICREATE-FILE DICT MVHUB.MODULE 18 11 4"
        OPEN "MVHUB.MODULE" TO F.MODULE ELSE
            ABORT "UNABLE TO CREATE MODULE FILE"
        END
    END
*
    OPEN "MVHUB.JAVASCRIPT" TO F.JAVASCRIPT ELSE
        EXECUTE "ICREATE-FILE DATA MVHUB.JAVASCRIPT 18 101 4"
        EXECUTE "ICREATE-FILE DICT MVHUB.JAVASCRIPT 18 11 4"
        OPEN "MVHUB.JAVASCRIPT" TO F.JAVASCRIPT ELSE
            ABORT "UNABLE TO CREATE JAVASCRIPT FILE"
        END
    END
*
    OPEN "MVHUB.VIEWS" TO F.VIEWS ELSE
        EXECUTE "ICREATE-FILE DATA MVHUB.VIEWS 18 101 4"
        EXECUTE "ICREATE-FILE DICT MVHUB.VIEWS 18 11 4"
        OPEN "MVHUB.VIEWS" TO F.VIEWS ELSE
            ABORT "UNABLE TO CREATE VIEWS FILE"
        END
    END
*
    MODULE.ID=UPCASE(TRIM(SEN<2>))
    MODULE.TITLE=SEN<3>
*
    IF LEN(MODULE.ID)<5 THEN
        CRT "Please pick a better name for module"
        STOP
    END
*
    READ MODULE.REC FROM F.MODULE,MODULE.ID ELSE MODULE.REC=""
    IF MODULE.TITLE#"" THEN MODULE.REC<MODULE$TITLE>=MODULE.TITLE
    IF MODULE.REC<MODULE$TITLE>="" THEN MODULE.REC<MODULE$TITLE>="[AUTO TITLE] ":MODULE.ID
    WRITE MODULE.REC ON F.MODULE,MODULE.ID
*
    CLOSE F.MODULE ; CLOSE F.JAVASCRIPT ; CLOSE F.VIEWS
    CLOSE
*
    JAVSCRIPT.FN="MVHUB.JAVASCRIPT,":MODULE.ID
    VIEWS.FN="MVHUB.VIEWS,":MODULE.ID
*
    OPEN JAVSCRIPT.FN TO F.MJAVASCRIPT ELSE
        EXECUTE "ICREATE-FILE DATA ":JAVSCRIPT.FN:" 19"
        OPEN JAVSCRIPT.FN TO F.MJAVASCRIPT ELSE
            ABORT "UNABLE TO CREATE ":JAVSCRIPT.FN:" JAVASCRIPT FILE"
        END
    END
*
    OPEN VIEWS.FN TO F.MVIEWS ELSE
        EXECUTE "ICREATE-FILE DATA ":VIEWS.FN:" 19"
        OPEN VIEWS.FN TO F.MVIEWS ELSE
            ABORT "UNABLE TO CREATE ":VIEWS.FN:" VIEWS FILE"
        END
    END
*
    CRT "Module ":MODULE.ID:" - ":MODULE.REC<MODULE$TITLE>:" created"
*
    STOP
